#
# Copyright (c) 2006-2010 rPath, Inc.
# This file is distributed under the terms of the MIT License.
# A copy is available at http://www.rpath.com/permanent/mit-license.html
#

loadSuperClass('rpathpackage')
class ConaryPolicy(BuildPackageRecipe, RpathPackageRecipe):
    name = 'conary-policy'
    version = ''

    def setup(r):
        r.rpathSetup()
        r.addArchive('ftp://download.rpath.com/conary/')
        #r.addMercurialSnapshot('http://hg.rpath.com/conary-policy')

        r.MakeInstall()
        r.Replace('xinetd:runtime', 'xinetd:rpm',
            '%(prefix)s/lib/conary/policy/xinetd.py')
        # NOT %(libdir)s
        r.CompilePython('%(prefix)s/lib/conary/policy',
                        pythonInterpreter='%(pybin)s')
        r.Remove('%(prefix)s/lib/conary/policy/*.pyo')

        # Need a flavor
        if Arch.x86_64:
            pass
